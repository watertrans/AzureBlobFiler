(function(e){function a(a){for(var t,s,i=a[0],r=a[1],c=a[2],p=0,u=[];p<i.length;p++)s=i[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&u.push(o[s][0]),o[s]=0;for(t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);d&&d(a);while(u.length)u.shift()();return n.push.apply(n,c||[]),l()}function l(){for(var e,a=0;a<n.length;a++){for(var l=n[a],t=!0,i=1;i<l.length;i++){var r=l[i];0!==o[r]&&(t=!1)}t&&(n.splice(a--,1),e=s(s.s=l[0]))}return e}var t={},o={app:0},n=[];function s(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.l=!0,l.exports}s.m=e,s.c=t,s.d=function(e,a,l){s.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:l})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,a){if(1&a&&(e=s(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var t in e)s.d(l,t,function(a){return e[a]}.bind(null,t));return l},s.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(a,"a",a),a},s.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},s.p="/AzureBlobFiler/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],r=i.push.bind(i);i.push=a,i=i.slice();for(var c=0;c<i.length;c++)a(i[c]);var d=r;n.push([1,"chunk-vendors"]),l()})({0:function(e,a){},1:function(e,a,l){e.exports=l("cd49")},"20e5":function(e,a,l){"use strict";(function(e){l.d(a,"a",(function(){return o}));var t=l("3ff8");l("5a92");function o(e){const a=t["a"].parse(e);let l=a.getPath();return l=l||"/",l=n(l),a.setPath(l),a.toString()}function n(e){return encodeURIComponent(e).replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%")}}).call(this,l("b639").Buffer)},b383:function(e,a,l){},cd49:function(e,a,l){"use strict";l.r(a);var t=l("7a23"),o=l("47e2");const n={en:{setting:{zipFilenameDecoding:"utf-8"},general:{refresh:"Refresh",close:"Close",cancel:"Cancel",upload:"Upload",uploading:"Uploading...",uploaded:"Uploaded",createFolder:"Create Folder",folderUpload:"Upload Folder",fileUpload:"Upload Files",zipFileUpload:"Upload Zip File",folderDelete:"Delete Folder",fileDelete:"Delete Files",folderName:"Folder Name",selectedItems:"Action for {count} item(s)",inputSasUrl:"Input SAS URL",sasUrl:"SAS URL",submit:"Submit",yes:"Yes",no:"No"},message:{required:"Enter '{target}'.",illegalCharacter:"Not possible to enter '{illegal}' for '{target}'.",unexpectedSignedResource:"Please create a SAS URL for the container.",unexpectedSignedPermissions:"Do not have enough permissions for the container.",invalidSasUrl:"The specified SAS URL cannot be used.",folderDeleteConfirmationMessage:"Are you sure you want to delete current folder?",fileDeleteConfirmationMessage:"Are you sure you want to delete selected files?"}},ja:{setting:{zipFilenameDecoding:"Shift_JIS"},general:{refresh:"更新",close:"閉じる",cancel:"キャンセル",upload:"アップロード",uploading:"アップロードしています...",uploaded:"アップロード完了",createFolder:"フォルダ作成",folderUpload:"フォルダアップロード",fileUpload:"ファイルアップロード",zipFileUpload:"ZIPファイルアップロード",folderDelete:"フォルダ削除",fileDelete:"ファイル削除",folderName:"フォルダ名",selectedItems:"アクション（{count}件）",inputSasUrl:"SAS URLを設定してください",sasUrl:"SAS URL",submit:"設定",yes:"はい",no:"いいえ"},message:{required:"'{target}'を入力してください。",illegalCharacter:"'{target}'に'{illegal}'を入力することはできません。",unexpectedSignedResource:"コンテナーに対するSAS URLを発行してください。",unexpectedSignedPermissions:"コンテナーに対するアクセス許可が足りません。",invalidSasUrl:"指定したSAS URLは使用できません。",folderDeleteConfirmationMessage:"現在のフォルダを削除してよろしいですか？",fileDeleteConfirmationMessage:"選択したファイルを削除してもよろしいですか？"}}},s=Object(o["a"])({locale:navigator.language.split("-")[0],fallbackLocale:"en",messages:n});var i=s;function r(e,a,l,o,n,s){const i=Object(t["F"])("router-view");return Object(t["z"])(),Object(t["g"])(i)}l("f5df");var c=Object(t["n"])({name:"App"}),d=l("6b0d"),p=l.n(d);const u=p()(c,[["render",r]]);var g=u,m=l("6c02");const f={class:"home"},b=Object(t["l"])(" "),y={style:{position:"relative"}},h=["src"],O={style:{"margin-left":"32px"}},j={class:"p-fluid"},U={class:"field"},v={for:"sasUrl",style:{"font-weight":"bold"}},w={key:0,id:"sasUrlHelp",class:"p-error"},S={class:"p-fluid"},F={class:"field"},k={for:"folderName",style:{"font-weight":"bold"}},x={key:0,id:"folderNameHelp",class:"p-error"},I={class:"fluid",style:{"margin-bottom":"5px"}},C={style:{"font-weight":"normal",color:"#fff","text-shadow":"1px 1px 0 #495057"}};function P(e,a,l,o,n,s){const i=Object(t["F"])("ConfirmDialog"),r=Object(t["F"])("Tree"),c=Object(t["F"])("SplitterPanel"),d=Object(t["F"])("Menubar"),p=Object(t["F"])("Breadcrumb"),u=Object(t["F"])("Column"),g=Object(t["F"])("DataTable"),m=Object(t["F"])("Splitter"),P=Object(t["F"])("InputText"),D=Object(t["F"])("Button"),N=Object(t["F"])("Dialog"),z=Object(t["F"])("ProgressBar"),R=Object(t["F"])("FileUploadProgress");return Object(t["z"])(),Object(t["i"])("div",f,[Object(t["m"])(i),Object(t["m"])(m,{class:"layout",stateKey:"directorySplitter",stateStorage:"local"},{default:Object(t["P"])(()=>[Object(t["m"])(c,{class:"layout-left",size:20},{default:Object(t["P"])(()=>[Object(t["m"])(r,{class:"layout-left__tree",value:e.nodes,expandedKeys:e.expandedKeys,"onUpdate:expandedKeys":a[0]||(a[0]=a=>e.expandedKeys=a),selectionKeys:e.selectionKeys,"onUpdate:selectionKeys":a[1]||(a[1]=a=>e.selectionKeys=a),onNodeSelect:e.onNodeSelect,onNodeExpand:e.onNodeSelect,selectionMode:"single"},null,8,["value","expandedKeys","selectionKeys","onNodeSelect","onNodeExpand"])]),_:1}),Object(t["m"])(c,{class:"layout-right",size:80},{default:Object(t["P"])(()=>[Object(t["m"])(d,{class:"layout-right__menu",model:e.menuItems},null,8,["model"]),Object(t["m"])(p,{class:"layout-right__breadcrumb",home:e.breadcrumbHome,model:e.breadcrumbItems},null,8,["home","model"]),Object(t["m"])(g,{class:"layout-right__table",selection:e.selectedItems,"onUpdate:selection":a[2]||(a[2]=a=>e.selectedItems=a),dataKey:"name",loading:e.loading,scrollable:!0,scrollHeight:"calc(100vh - 250px)",value:e.blobItems,resizableColumns:!0,scrollDirection:"both",columnResizeMode:"expand"},{empty:Object(t["P"])(()=>[b]),default:Object(t["P"])(()=>[Object(t["m"])(u,{selectionMode:"multiple",style:{"flex-basis":"42px"}}),Object(t["m"])(u,{field:"name",header:"Name",style:{"flex-basis":"400px"}},{body:Object(t["P"])(a=>[Object(t["j"])("span",y,[Object(t["j"])("img",{src:e.getFileIcon(a.data.name),style:{position:"absolute",margin:"-8px 0 0 -8px"}},null,8,h),Object(t["j"])("span",O,Object(t["J"])(e.getFileName(a.data.name)),1)])]),_:1}),Object(t["m"])(u,{field:"properties.lastModified",header:"LastModified",style:{"flex-basis":"200px"}},{body:Object(t["P"])(a=>[Object(t["l"])(Object(t["J"])(e.convertToISO8601Local(a.data.properties.lastModified)),1)]),_:1}),Object(t["m"])(u,{field:"properties.contentLength",header:"Size",style:{"flex-basis":"120px"},bodyStyle:"justify-content: right"},{body:Object(t["P"])(a=>[Object(t["l"])(Object(t["J"])(e.formatBytes(a.data.properties.contentLength)),1)]),_:1}),Object(t["m"])(u,{field:"properties.contentType",header:"ContentType",style:{"flex-basis":"200px"}}),Object(t["m"])(u,{style:{"flex-grow":"1"}})]),_:1},8,["selection","loading","value"]),Object(t["Q"])(Object(t["j"])("textarea",{ref:"messageRef",class:"layout-right__message","onUpdate:modelValue":a[3]||(a[3]=a=>e.messages=a),style:{width:"100%"},readonly:""},null,512),[[t["N"],e.messages]]),Object(t["j"])("input",{ref:"fileUploadInputRef",type:"file",name:"file",id:"fileUploadInput",onChange:a[4]||(a[4]=(...a)=>e.onChangeFileUploadInput&&e.onChangeFileUploadInput(...a)),hidden:"",multiple:""},null,544),Object(t["j"])("input",{ref:"zipFileUploadInputRef",type:"file",name:"zipFile",id:"zipFileUploadInput",onChange:a[5]||(a[5]=(...a)=>e.onChangeZipFileUploadInput&&e.onChangeZipFileUploadInput(...a)),accept:".zip",hidden:""},null,544),Object(t["j"])("input",{ref:"folderUploadInputRef",type:"file",name:"folder",id:"folderUploadInput",onChange:a[6]||(a[6]=(...a)=>e.onChangeFolderUploadInput&&e.onChangeFolderUploadInput(...a)),hidden:"",webkitdirectory:""},null,544)]),_:1})]),_:1}),Object(t["m"])(N,{header:e.t("general.inputSasUrl"),visible:e.isShowingInputSasUrlDialog,"onUpdate:visible":a[8]||(a[8]=a=>e.isShowingInputSasUrlDialog=a),style:{width:"600px"},modal:!0,closable:!1},{footer:Object(t["P"])(()=>[Object(t["m"])(D,{label:e.t("general.submit"),icon:"pi pi-check",onClick:e.onClickDialogSubmitSasUrl,class:"mr-0"},null,8,["label","onClick"])]),default:Object(t["P"])(()=>[Object(t["j"])("div",j,[Object(t["j"])("div",U,[Object(t["j"])("label",v,Object(t["J"])(e.t("general.sasUrl")),1),Object(t["m"])(P,{id:"sasUrl",modelValue:e.sasUrl,"onUpdate:modelValue":a[7]||(a[7]=a=>e.sasUrl=a),class:Object(t["u"])(e.sasUrlErrorMessage?"p-invalid":""),maxlength:"512",autocomplete:"off"},null,8,["modelValue","class"]),e.sasUrlErrorMessage?(Object(t["z"])(),Object(t["i"])("small",w,Object(t["J"])(e.sasUrlErrorMessage),1)):Object(t["h"])("",!0)])])]),_:1},8,["header","visible"]),Object(t["m"])(N,{header:e.t("general.createFolder"),visible:e.isShowingCreateFolderDialog,"onUpdate:visible":a[11]||(a[11]=a=>e.isShowingCreateFolderDialog=a),style:{width:"400px"},modal:!0},{footer:Object(t["P"])(()=>[Object(t["m"])(D,{label:e.t("general.cancel"),icon:"pi pi-times",onClick:a[10]||(a[10]=a=>e.isShowingCreateFolderDialog=!1),class:"p-button-text"},null,8,["label"]),Object(t["m"])(D,{label:e.t("general.createFolder"),icon:"pi pi-check",onClick:e.onClickDialogCreateFolder,class:"mr-0"},null,8,["label","onClick"])]),default:Object(t["P"])(()=>[Object(t["j"])("div",S,[Object(t["j"])("div",F,[Object(t["j"])("label",k,Object(t["J"])(e.t("general.folderName")),1),Object(t["m"])(P,{id:"folderName",modelValue:e.folderName,"onUpdate:modelValue":a[9]||(a[9]=a=>e.folderName=a),class:Object(t["u"])(e.folderNameErrorMessage?"p-invalid":""),maxlength:"254",autocomplete:"off"},null,8,["modelValue","class"]),e.folderNameErrorMessage?(Object(t["z"])(),Object(t["i"])("small",x,Object(t["J"])(e.folderNameErrorMessage),1)):Object(t["h"])("",!0)])])]),_:1},8,["header","visible"]),Object(t["m"])(N,{header:e.isUploading?e.t("general.uploading"):e.t("general.uploaded"),visible:e.isShowingUploadProgressDialog,"onUpdate:visible":a[13]||(a[13]=a=>e.isShowingUploadProgressDialog=a),style:{width:"768px","max-height":"80vh"},modal:!0,closable:!1},{footer:Object(t["P"])(()=>[Object(t["m"])(D,{label:e.t("general.close"),icon:"pi pi-check",onClick:a[12]||(a[12]=a=>e.isShowingUploadProgressDialog=!1),class:"mr-0",disabled:e.isUploading},null,8,["label","disabled"])]),default:Object(t["P"])(()=>[Object(t["j"])("div",I,[Object(t["m"])(z,{value:e.getUploadProgress()},{default:Object(t["P"])(()=>[Object(t["j"])("div",C,Object(t["J"])(e.getUploadProgress())+"%",1)]),_:1},8,["value"])]),(Object(t["z"])(!0),Object(t["i"])(t["a"],null,Object(t["D"])(e.uploadFiles,a=>(Object(t["z"])(),Object(t["g"])(R,{key:a.key,keyValue:a.key,name:a.name,size:a.size,uploaded:a.uploaded,onCompelete:e.onCompeleteUpload,onClose:e.onCloseUploadProgress},null,8,["keyValue","name","size","uploaded","onCompelete","onClose"]))),128))]),_:1},8,["header","visible"])])}var D=l("d725"),N=l("6bd1"),z=l("20e5"),R=l("3ff8");function B(e,a=1){if(0===e)return"0 B";const l=1024,t=a<0?0:a,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/Math.pow(l,n)).toFixed(t))+" "+o[n]}function M(e){return e.replace(/^.*[\\/]/,"")}function _(e){return e.split(".").pop()}function E(e){setTimeout(()=>{const a=document.getElementById(e);a&&a.focus()},200)}const T=new Set(["aac","ai","aiff","avi","bmp","c","cpp","css","csv","dat","dmg","doc","dotx","dwg","dxf","eps","exe","flv","gif","h","hpp","html","ics","iso","java","jpg","js","key","less","mid","mp3","mp4","mpg","odf","ods","odt","otp","ott","pdf","php","png","ppt","psd","py","qt","rar","rb","rtf","sass","scss","sql","tga","tgz","tiff","txt","wav","xls","xlsx","xml","yml","zip"]);function L(e){const a="/AzureBlobFiler/img/icon/file/",l=".png";let t=_(e).toLowerCase();return T.has(t)||(t="blank"),a+t+l}function K(e){return null==e?"":e.getUTCFullYear()+"-"+H(e.getUTCMonth()+1)+"-"+H(e.getUTCDate())+"T"+H(e.getUTCHours())+":"+H(e.getUTCMinutes())+":"+H(e.getUTCSeconds())+"Z"}function A(e){if(null==e)return"";const a=-1*(new Date).getTimezoneOffset();if(0==a)return K(e);const l=a<0?"-":"+",t=Math.floor(Math.abs(a/60)),o=Math.abs(a%60);return e.getFullYear()+"-"+H(e.getMonth()+1)+"-"+H(e.getDate())+"T"+H(e.getHours())+":"+H(e.getMinutes())+":"+H(e.getSeconds())+l+H(t)+":"+H(o)}function H(e,a=2){return e.toString().padStart(a,"0")}function V(e,a){for(let l=0;l<a.length;++l)if(e.indexOf(a.charAt(l))<0)return!1;return!0}var J=l("c4e3"),q=l.n(J);const Z={class:"fluid",style:{"margin-bottom":"5px"}},W={style:{"margin-left":"5px","font-weight":"normal",color:"#fff","text-align":"left","text-shadow":"1px 1px 0 #495057"}};function Y(e,a,l,o,n,s){const i=Object(t["F"])("ProgressBar");return Object(t["z"])(),Object(t["i"])("div",Z,[Object(t["m"])(i,{value:e.value},{default:Object(t["P"])(()=>[Object(t["j"])("div",W,Object(t["J"])(e.name)+" : "+Object(t["J"])(e.value)+"%",1)]),_:1},8,["value"])])}var Q=Object(t["n"])({name:"FileUploadProgress",props:{keyValue:String,name:String,size:{type:Number,default:0},uploaded:{type:Number,default:0}},emits:["compelete","close"],setup(e,a){const l=Object(t["B"])({closing:!1,value:0});return Object(t["O"])(()=>e.uploaded,t=>{l.value=Math.floor(t/e.size*100),l.value>=100&&!l.closing&&(l.closing=!0,a.emit("compelete",e.keyValue,e.size),setTimeout(()=>a.emit("close",e.keyValue),3e3))}),{...Object(t["L"])(l)}}});const G=p()(Q,[["render",Y]]);var X=G,$=Object(t["n"])({name:"Home",components:{FileUploadProgress:X},setup(){const{t:e}=Object(o["b"])(),a=Object(D["b"])(),l=Object(t["C"])(),n=Object(t["C"])(),s=Object(t["C"])(),i=Object(t["C"])(),r={key:"",label:"",icon:"pi pi-fw pi-inbox",children:[],data:[],loaded:!1},c=[{key:"refresh",label:e("general.refresh"),icon:"pi pi-fw pi-refresh",command:async()=>{await P()}},{key:"createFolder",label:e("general.createFolder"),icon:"pi pi-fw pi-folder",command:async()=>{await _()}},{key:"upload",label:e("general.upload"),icon:"pi pi-fw pi-upload",items:[{key:"folderUpload",label:e("general.folderUpload"),icon:"pi pi-fw pi-folder-open",command:async()=>{await Z()}},{key:"fileUpload",label:e("general.fileUpload"),icon:"pi pi-fw pi-copy",command:async()=>{await J()}},{key:"zipFileUpload",label:e("general.zipFileUpload"),icon:"pi pi-fw pi-sitemap",command:async()=>{await W()}}]},{key:"selectedItems",label:Object(t["e"])(()=>e("general.selectedItems",{count:m.selectedItems.length})),icon:"pi pi-fw pi-ellipsis-h",disabled:Object(t["e"])(()=>0==m.selectedItems.length),items:[{key:"fileDelete",label:e("general.fileDelete"),icon:"pi pi-fw pi-file-excel",command:async()=>{await Q()}}]},{key:"folderDelete",label:e("general.folderDelete"),icon:"pi pi-fw pi-trash",command:async()=>{await Y()}}];let d,p,u="{ENTER_THE_BLOB_SAS_URL_HERE}",g=".";const m=Object(t["B"])({loading:!1,expandedKeys:{},selectionKeys:{},breadcrumbHome:{label:"",command:()=>k("")},breadcrumbItems:[],nodes:[],node:r,flattenedNodes:{},blobItems:[],selectedItems:[],messages:"",menuItems:c,folderName:"",folderNameErrorMessage:"",sasUrl:"",sasUrlErrorMessage:"",isShowingCreateFolderDialog:!1,isShowingUploadProgressDialog:!1,isShowingInputSasUrlDialog:!1,isUploading:!1,uploadFiles:[],uploadSize:0,uploadedSize:0});m.flattenedNodes[r.key]=r;const f=async()=>{d=new N["a"](u),g=".",p=d.getContainerClient(g),await p.listBlobsByHierarchy("/",{prefix:"__DUMMY__"}).next(),await b(r,!1),m.nodes.push(r),m.breadcrumbHome.label=p.containerName,r.label=p.containerName,r.children&&r.children.length>0&&w(r.key)},b=async(e,a)=>{if(!e.children)return;const l=e.key;if(m.selectedItems=[],m.blobItems=[],a||!e.loaded){a&&(e.loaded=!1,e.children.splice(0),e.data.splice(0)),m.loading=!0;try{m.messages+="[INFO] GET /"+l+"\n";for await(const a of p.listBlobsByHierarchy("/",{prefix:l}))if("prefix"===a.kind){let l=a;if(e.children.find(e=>e.key==l.name))continue;const t={key:l.name,label:M(l.name.slice(0,-1)),icon:"pi pi-fw pi-folder",children:[],data:[],leaf:!1,parent:e};e.children.push(t),m.flattenedNodes[t.key]=t}else{let l=a;".keep"!=M(l.name)&&m.blobItems.push(l),e.data.push(l)}e.loaded=!0}catch(t){m.messages+="[ERROR] "+t.message+"\n"}m.loading=!1,U()}else{const a=e.data.length;for(let l=0;l<a;l++)".keep"!=M(e.data[l].name)&&m.blobItems.push(e.data[l])}},y=async()=>{try{m.messages+="[INFO] Preparing for delete...\n";const e=[];for(const a in m.flattenedNodes){const l=m.flattenedNodes[a];if(l.key.startsWith(m.node.key)){for(const a of l.data)m.messages+="[INFO] Deleting /"+a.name+"\n",e.push(p.deleteBlob(a.name));delete m.flattenedNodes[a]}}await Promise.all(e),m.messages+="[INFO] Done.\n"}catch(e){m.messages+="[ERROR] "+e.message+"\n"}U(),m.node.parent?(F(m.node.parent.key),await b(m.node.parent,!0),await k(m.node.parent.key)):(F(r.key),await b(r,!0),await k(r.key))},h=async()=>{try{m.messages+="[INFO] Preparing for delete...\n";const e=[];for(const a of m.selectedItems)m.messages+="[INFO] Deleting /"+a.name+"\n",e.push(p.deleteBlob(a.name));await Promise.all(e),m.messages+="[INFO] Done.\n"}catch(e){m.messages+="[ERROR] "+e.message+"\n"}U(),F(m.node.key),await b(m.node,!0),await k(m.node.key)},O=async e=>{const a=[],l=Object.keys(e.files).length;let t=0;e.forEach(async(e,o)=>{const n=await o.async("arraybuffer");o.name.endsWith("/")||a.push({name:o.name,content:n,size:n.byteLength}),t++,l==t&&await j(a)})},j=async e=>{m.isShowingUploadProgressDialog=!0,m.uploadFiles=[],m.uploadSize=0,m.uploadedSize=0,m.isUploading=!0;try{m.messages+="[INFO] Preparing for upload...\n";const a=[];for(const l of e){m.messages+="[INFO] Uploading /"+m.node.key+l.name+"\n";const e=p.getBlockBlobClient(m.node.key+l.name),o=Object(t["B"])({key:m.node.key+l.name,name:l.name,size:l.size,uploaded:0});m.uploadSize+=l.size,m.uploadFiles.push(o),a.push(e.uploadData(l.content,{onProgress:e=>{o.uploaded=e.loadedBytes}}))}await Promise.all(a),m.messages+="[INFO] Done.\n"}catch(a){m.messages+="[ERROR] "+a.message+"\n"}U(),await b(m.node,!0),m.isUploading=!1,s.value&&(s.value.value="")},U=()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight)},v=e=>m.flattenedNodes[e],w=e=>{m.expandedKeys[e]=!0},S=e=>{delete m.expandedKeys[e]},F=e=>{for(const a in m.expandedKeys)a.startsWith(e)&&S(a);S(e)},k=async e=>{const a=v(e);a&&await le(a);for(const l in m.selectionKeys)delete m.selectionKeys[l];m.selectionKeys[e]=!0},x=async e=>{const a=v(e);a&&(F(a.key),await b(a,!0),await k(a.key))},I=e=>{m.breadcrumbItems.splice(0);const a=e.key.slice(0,-1).split("/");let l="";const t=a.length;for(let o=0;o<t;o++)if(a[o]){l+=a[o]+"/";const e=l;m.breadcrumbItems.push({label:a[o],command:async()=>{await k(e)}})}},C=()=>0==m.uploadSize?0:Math.floor(m.uploadedSize/m.uploadSize*100),P=async()=>{await x(m.node.key)},_=async()=>{m.folderName="",m.folderNameErrorMessage="",m.isShowingCreateFolderDialog=!0,E("folderName")},T=async()=>{if(!m.sasUrl)return void(m.sasUrlErrorMessage=e("message.required",{target:e("general.sasUrl")}));const a=Object(z["a"])(m.sasUrl),l=R["a"].parse(a);if("c"==l.getQueryParameterValue("sr"))if(l.getQueryParameterValue("sp"))if(V(l.getQueryParameterValue("sp"),"racwdl")){u=m.sasUrl;try{await f()}catch(t){return console.log(t),void(m.sasUrlErrorMessage=e("message.invalidSasUrl"))}m.isShowingInputSasUrlDialog=!1}else m.sasUrlErrorMessage=e("message.unexpectedSignedPermissions");else m.sasUrlErrorMessage=e("message.unexpectedSignedPermissions");else m.sasUrlErrorMessage=e("message.unexpectedSignedResource")},H=async()=>{if(!m.folderName)return void(m.folderNameErrorMessage=e("message.required",{target:e("general.folderName")}));if(m.folderName.includes("/"))return void(m.folderNameErrorMessage=e("message.illegalCharacter",{target:e("general.folderName"),illegal:"/"}));const a=m.node.key+m.folderName+"/";try{m.messages+="[INFO] Creating /"+m.folderName+"\n";const e=p.getBlockBlobClient(a+".keep");await e.uploadData(new ArrayBuffer(0)),m.messages+="[INFO] Done.\n"}catch(l){m.messages+="[ERROR] "+l.message+"\n"}if(U(),m.node.children&&!m.node.children.find(e=>e.key==a)){const e={key:a,label:M(a.slice(0,-1)),icon:"pi pi-fw pi-folder",children:[],data:[],leaf:!1,parent:m.node};m.node.children.push(e),m.flattenedNodes[e.key]=e,w(m.node.key)}await k(a),m.isShowingCreateFolderDialog=!1},J=async()=>{n.value&&n.value.click()},Z=async()=>{i.value&&i.value.click()},W=async()=>{s.value&&s.value.click()},Y=async()=>{a.require({message:e("message.folderDeleteConfirmationMessage"),header:e("general.folderDelete"),icon:"pi pi-exclamation-triangle",acceptLabel:e("general.yes"),rejectLabel:e("general.no"),accept:async()=>{await y()}})},Q=async()=>{a.require({message:e("message.fileDeleteConfirmationMessage"),header:e("general.fileDelete"),icon:"pi pi-exclamation-triangle",acceptLabel:e("general.yes"),rejectLabel:e("general.no"),accept:async()=>{await h()}})},G=async()=>{if(n.value&&n.value.files){m.isShowingUploadProgressDialog=!0,m.uploadFiles=[],m.uploadSize=0,m.uploadedSize=0,m.isUploading=!0;try{m.messages+="[INFO] Preparing for upload...\n";const e=[];for(const a of n.value.files){m.messages+="[INFO] Uploading /"+m.node.key+a.name+"\n";const l=p.getBlockBlobClient(m.node.key+a.name),o=Object(t["B"])({key:m.node.key+a.name,name:a.name,size:a.size,uploaded:0});m.uploadSize+=a.size,m.uploadFiles.push(o),e.push(l.uploadData(a,{onProgress:e=>{o.uploaded=e.loadedBytes}}))}await Promise.all(e),m.messages+="[INFO] Done.\n"}catch(e){m.messages+="[ERROR] "+e.message+"\n"}U(),await b(m.node,!0),m.isUploading=!1,n.value.value=""}},X=async()=>{if(!s.value)return;if(!s.value.files)return;const a=s.value.files[0];try{const l=new TextDecoder(e("setting.zipFilenameDecoding")),t=await q.a.loadAsync(a,{decodeFileName:e=>l.decode(e)});await O(t)}catch(l){m.messages+="[ERROR] "+l.message+"\n",U()}},$=async()=>{if(i.value&&i.value.files){m.isShowingUploadProgressDialog=!0,m.uploadFiles=[],m.uploadSize=0,m.uploadedSize=0,m.isUploading=!0;try{m.messages+="[INFO] Preparing for upload...\n";const e=[];for(const a of i.value.files){const l=a;m.messages+="[INFO] Uploading /"+m.node.key+l.webkitRelativePath+"\n";const o=p.getBlockBlobClient(m.node.key+l.webkitRelativePath),n=Object(t["B"])({key:m.node.key+l.webkitRelativePath,name:a.name,size:a.size,uploaded:0});m.uploadSize+=a.size,m.uploadFiles.push(n),e.push(o.uploadData(a,{onProgress:e=>{n.uploaded=e.loadedBytes}}))}await Promise.all(e),m.messages+="[INFO] Done.\n"}catch(e){m.messages+="[ERROR] "+e.message+"\n"}U(),await x(m.node.key),m.isUploading=!1,i.value.value=""}},ee=(e,a)=>{m.uploadedSize+=a},ae=e=>{if(!m.uploadFiles)return;let a=-1;for(let l=0;l<m.uploadFiles.length;l++)if(m.uploadFiles[l].key===e){a=l;break}a>=0&&m.uploadFiles.splice(a,1)},le=async e=>{await b(e,!1),m.node=e,I(e),e.children&&e.children.length>0?w(e.key):e.leaf=!0};return Object(t["x"])(async()=>{if(u.startsWith("{")&&u.endsWith("}"))m.isShowingInputSasUrlDialog=!0;else try{await f()}catch(e){console.log(e),m.isShowingInputSasUrlDialog=!0}}),{...Object(t["L"])(m),messageRef:l,fileUploadInputRef:n,zipFileUploadInputRef:s,folderUploadInputRef:i,convertToISO8601:K,convertToISO8601Local:A,formatBytes:B,getFileName:M,getFileIcon:L,getUploadProgress:C,listBlobs:b,onChangeFileUploadInput:G,onChangeZipFileUploadInput:X,onChangeFolderUploadInput:$,onClickDialogCreateFolder:H,onClickDialogSubmitSasUrl:T,onCloseUploadProgress:ae,onCompeleteUpload:ee,onNodeSelect:le,t:e}}});const ee=p()($,[["render",P]]);var ae=ee;const le=[{path:"/",name:"Home",component:ae}],te=Object(m["a"])({history:Object(m["b"])("/AzureBlobFiler/"),routes:le});var oe=te,ne=l("9319"),se=l("bb57"),ie=l("c98b"),re=l("6f85"),ce=l("b24b"),de=l("9383"),pe=l("5b2c"),ue=l("5bd2"),ge=l("8398"),me=l("c0c3"),fe=l("c045"),be=l("237b"),ye=l("1e02"),he=l("e73a"),Oe=l("5eec");l("098b"),l("e1ae"),l("4121"),l("22a3"),l("b383");const je=Object(t["f"])(g);je.use(i),je.use(oe),je.use(ne["a"]),je.use(ce["a"]),je.component("Button",se["a"]),je.component("Breadcrumb",ie["a"]),je.component("Column",re["a"]),je.component("ConfirmDialog",de["a"]),je.component("DataTable",pe["a"]),je.component("Dialog",ue["a"]),je.component("InputText",ge["a"]),je.component("Menubar",me["a"]),je.component("ProgressBar",fe["a"]),je.component("Splitter",be["a"]),je.component("SplitterPanel",ye["a"]),je.component("Tree",he["a"]),je.component("TreeTable",Oe["a"]),je.mount("#app")}});
//# sourceMappingURL=app.js.map