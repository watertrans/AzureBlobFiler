(function(e){function a(a){for(var l,n,r=a[0],i=a[1],c=a[2],p=0,u=[];p<r.length;p++)n=r[p],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);d&&d(a);while(u.length)u.shift()();return s.push.apply(s,c||[]),t()}function t(){for(var e,a=0;a<s.length;a++){for(var t=s[a],l=!0,r=1;r<t.length;r++){var i=t[r];0!==o[i]&&(l=!1)}l&&(s.splice(a--,1),e=n(n.s=t[0]))}return e}var l={},o={app:0},s=[];function n(a){if(l[a])return l[a].exports;var t=l[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=e,n.c=l,n.d=function(e,a,t){n.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,a){if(1&a&&(e=n(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var l in e)n.d(t,l,function(a){return e[a]}.bind(null,l));return t},n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,"a",a),a},n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},n.p="/AzureBlobFiler/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=a,r=r.slice();for(var c=0;c<r.length;c++)a(r[c]);var d=i;s.push([1,"chunk-vendors"]),t()})({0:function(e,a){},1:function(e,a,t){e.exports=t("cd49")},"20e5":function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return o}));var l=t("3ff8");t("5a92");function o(e){const a=l["a"].parse(e);let t=a.getPath();return t=t||"/",t=s(t),a.setPath(t),a.toString()}function s(e){return encodeURIComponent(e).replace(/%2F/g,"/").replace(/'/g,"%27").replace(/\+/g,"%20").replace(/%25/g,"%")}}).call(this,t("b639").Buffer)},b383:function(e,a,t){},cd49:function(e,a,t){"use strict";t.r(a);var l=t("7a23"),o=t("47e2");const s={en:{general:{refresh:"Refresh",close:"Close",cancel:"Cancel",upload:"Upload",uploading:"Uploading...",uploaded:"Uploaded",createFolder:"Create Folder",folderUpload:"Upload Folder",fileUpload:"Upload Files",folderDelete:"Delete Folder",fileDelete:"Delete Files",folderName:"Folder Name",selectedItems:"Action for {count} item(s)",inputSasUrl:"Input SAS URL",sasUrl:"SAS URL",submit:"Submit",yes:"Yes",no:"No"},message:{required:"Enter '{target}'.",illegalCharacter:"Not possible to enter '{illegal}' for '{target}'.",unexpectedSignedResource:"Please create a SAS URL for the container.",unexpectedSignedPermissions:"Do not have enough permissions for the container.",invalidSasUrl:"The specified SAS URL cannot be used.",folderDeleteConfirmationMessage:"Are you sure you want to delete current folder?",fileDeleteConfirmationMessage:"Are you sure you want to delete selected files?"}},ja:{general:{refresh:"更新",close:"閉じる",cancel:"キャンセル",upload:"アップロード",uploading:"アップロードしています...",uploaded:"アップロード完了",createFolder:"フォルダ作成",folderUpload:"フォルダアップロード",fileUpload:"ファイルアップロード",folderDelete:"フォルダ削除",fileDelete:"ファイル削除",folderName:"フォルダ名",selectedItems:"アクション（{count}件）",inputSasUrl:"SAS URLを設定してください",sasUrl:"SAS URL",submit:"設定",yes:"はい",no:"いいえ"},message:{required:"'{target}'を入力してください。",illegalCharacter:"'{target}'に'{illegal}'を入力することはできません。",unexpectedSignedResource:"コンテナーに対するSAS URLを発行してください。",unexpectedSignedPermissions:"コンテナーに対するアクセス許可が足りません。",invalidSasUrl:"指定したSAS URLは使用できません。",folderDeleteConfirmationMessage:"現在のフォルダを削除してよろしいですか？",fileDeleteConfirmationMessage:"選択したファイルを削除してもよろしいですか？"}}},n=Object(o["a"])({locale:navigator.language.split("-")[0],fallbackLocale:"en",messages:s});var r=n;function i(e,a,t,o,s,n){const r=Object(l["F"])("router-view");return Object(l["z"])(),Object(l["g"])(r)}t("f5df");var c=Object(l["n"])({name:"App"}),d=t("6b0d"),p=t.n(d);const u=p()(c,[["render",i]]);var g=u,m=t("6c02");const f={class:"home"},b=Object(l["l"])(" "),y={style:{position:"relative"}},h=["src"],O={style:{"margin-left":"32px"}},j={class:"p-fluid"},U={class:"field"},S={for:"sasUrl",style:{"font-weight":"bold"}},v={key:0,id:"sasUrlHelp",class:"p-error"},w={class:"p-fluid"},k={class:"field"},F={for:"folderName",style:{"font-weight":"bold"}},x={key:0,id:"folderNameHelp",class:"p-error"},C={class:"fluid",style:{"margin-bottom":"5px"}},N={style:{"font-weight":"normal",color:"#fff","text-shadow":"1px 1px 0 #495057"}};function P(e,a,t,o,s,n){const r=Object(l["F"])("ConfirmDialog"),i=Object(l["F"])("Tree"),c=Object(l["F"])("SplitterPanel"),d=Object(l["F"])("Menubar"),p=Object(l["F"])("Breadcrumb"),u=Object(l["F"])("Column"),g=Object(l["F"])("DataTable"),m=Object(l["F"])("Splitter"),P=Object(l["F"])("InputText"),I=Object(l["F"])("Button"),D=Object(l["F"])("Dialog"),M=Object(l["F"])("ProgressBar"),B=Object(l["F"])("FileUploadProgress");return Object(l["z"])(),Object(l["i"])("div",f,[Object(l["m"])(r),Object(l["m"])(m,{class:"layout",stateKey:"directorySplitter",stateStorage:"local"},{default:Object(l["P"])(()=>[Object(l["m"])(c,{class:"layout-left",size:20},{default:Object(l["P"])(()=>[Object(l["m"])(i,{class:"layout-left__tree",value:e.nodes,expandedKeys:e.expandedKeys,"onUpdate:expandedKeys":a[0]||(a[0]=a=>e.expandedKeys=a),selectionKeys:e.selectionKeys,"onUpdate:selectionKeys":a[1]||(a[1]=a=>e.selectionKeys=a),onNodeSelect:e.onNodeSelect,onNodeExpand:e.onNodeSelect,selectionMode:"single"},null,8,["value","expandedKeys","selectionKeys","onNodeSelect","onNodeExpand"])]),_:1}),Object(l["m"])(c,{class:"layout-right",size:80},{default:Object(l["P"])(()=>[Object(l["m"])(d,{class:"layout-right__menu",model:e.menuItems},null,8,["model"]),Object(l["m"])(p,{class:"layout-right__breadcrumb",home:e.breadcrumbHome,model:e.breadcrumbItems},null,8,["home","model"]),Object(l["m"])(g,{class:"layout-right__table",selection:e.selectedItems,"onUpdate:selection":a[2]||(a[2]=a=>e.selectedItems=a),dataKey:"name",loading:e.loading,scrollable:!0,scrollHeight:"calc(100vh - 250px)",value:e.blobItems,resizableColumns:!0,scrollDirection:"both",columnResizeMode:"expand"},{empty:Object(l["P"])(()=>[b]),default:Object(l["P"])(()=>[Object(l["m"])(u,{selectionMode:"multiple",style:{"flex-basis":"42px"}}),Object(l["m"])(u,{field:"name",header:"Name",style:{"flex-basis":"400px"}},{body:Object(l["P"])(a=>[Object(l["j"])("span",y,[Object(l["j"])("img",{src:e.getFileIcon(a.data.name),style:{position:"absolute",margin:"-8px 0 0 -8px"}},null,8,h),Object(l["j"])("span",O,Object(l["J"])(e.getFileName(a.data.name)),1)])]),_:1}),Object(l["m"])(u,{field:"properties.lastModified",header:"LastModified",style:{"flex-basis":"200px"}},{body:Object(l["P"])(a=>[Object(l["l"])(Object(l["J"])(e.convertToISO8601Local(a.data.properties.lastModified)),1)]),_:1}),Object(l["m"])(u,{field:"properties.contentLength",header:"Size",style:{"flex-basis":"120px"},bodyStyle:"justify-content: right"},{body:Object(l["P"])(a=>[Object(l["l"])(Object(l["J"])(e.formatBytes(a.data.properties.contentLength)),1)]),_:1}),Object(l["m"])(u,{field:"properties.contentType",header:"ContentType",style:{"flex-basis":"200px"}}),Object(l["m"])(u,{style:{"flex-grow":"1"}})]),_:1},8,["selection","loading","value"]),Object(l["Q"])(Object(l["j"])("textarea",{ref:"messageRef",class:"layout-right__message","onUpdate:modelValue":a[3]||(a[3]=a=>e.messages=a),style:{width:"100%"},readonly:""},null,512),[[l["N"],e.messages]]),Object(l["j"])("input",{ref:"fileUploadInputRef",type:"file",name:"file",id:"fileUploadInput",onChange:a[4]||(a[4]=(...a)=>e.onChangeFileUploadInput&&e.onChangeFileUploadInput(...a)),hidden:"",multiple:""},null,544),Object(l["j"])("input",{ref:"folderUploadInputRef",type:"file",name:"folder",id:"folderUploadInput",onChange:a[5]||(a[5]=(...a)=>e.onChangeFolderUploadInput&&e.onChangeFolderUploadInput(...a)),hidden:"",webkitdirectory:""},null,544)]),_:1})]),_:1}),Object(l["m"])(D,{header:e.t("general.inputSasUrl"),visible:e.isShowingInputSasUrlDialog,"onUpdate:visible":a[7]||(a[7]=a=>e.isShowingInputSasUrlDialog=a),style:{width:"600px"},modal:!0,closable:!1},{footer:Object(l["P"])(()=>[Object(l["m"])(I,{label:e.t("general.submit"),icon:"pi pi-check",onClick:e.onClickDialogSubmitSasUrl,class:"mr-0"},null,8,["label","onClick"])]),default:Object(l["P"])(()=>[Object(l["j"])("div",j,[Object(l["j"])("div",U,[Object(l["j"])("label",S,Object(l["J"])(e.t("general.sasUrl")),1),Object(l["m"])(P,{id:"sasUrl",modelValue:e.sasUrl,"onUpdate:modelValue":a[6]||(a[6]=a=>e.sasUrl=a),class:Object(l["u"])(e.sasUrlErrorMessage?"p-invalid":""),maxlength:"512",autocomplete:"off"},null,8,["modelValue","class"]),e.sasUrlErrorMessage?(Object(l["z"])(),Object(l["i"])("small",v,Object(l["J"])(e.sasUrlErrorMessage),1)):Object(l["h"])("",!0)])])]),_:1},8,["header","visible"]),Object(l["m"])(D,{header:e.t("general.createFolder"),visible:e.isShowingCreateFolderDialog,"onUpdate:visible":a[10]||(a[10]=a=>e.isShowingCreateFolderDialog=a),style:{width:"400px"},modal:!0},{footer:Object(l["P"])(()=>[Object(l["m"])(I,{label:e.t("general.cancel"),icon:"pi pi-times",onClick:a[9]||(a[9]=a=>e.isShowingCreateFolderDialog=!1),class:"p-button-text"},null,8,["label"]),Object(l["m"])(I,{label:e.t("general.createFolder"),icon:"pi pi-check",onClick:e.onClickDialogCreateFolder,class:"mr-0"},null,8,["label","onClick"])]),default:Object(l["P"])(()=>[Object(l["j"])("div",w,[Object(l["j"])("div",k,[Object(l["j"])("label",F,Object(l["J"])(e.t("general.folderName")),1),Object(l["m"])(P,{id:"folderName",modelValue:e.folderName,"onUpdate:modelValue":a[8]||(a[8]=a=>e.folderName=a),class:Object(l["u"])(e.folderNameErrorMessage?"p-invalid":""),maxlength:"254",autocomplete:"off"},null,8,["modelValue","class"]),e.folderNameErrorMessage?(Object(l["z"])(),Object(l["i"])("small",x,Object(l["J"])(e.folderNameErrorMessage),1)):Object(l["h"])("",!0)])])]),_:1},8,["header","visible"]),Object(l["m"])(D,{header:e.isUploading?e.t("general.uploading"):e.t("general.uploaded"),visible:e.isShowingUploadProgressDialog,"onUpdate:visible":a[12]||(a[12]=a=>e.isShowingUploadProgressDialog=a),style:{width:"768px","max-height":"80vh"},modal:!0,closable:!1},{footer:Object(l["P"])(()=>[Object(l["m"])(I,{label:e.t("general.close"),icon:"pi pi-check",onClick:a[11]||(a[11]=a=>e.isShowingUploadProgressDialog=!1),class:"mr-0",disabled:e.isUploading},null,8,["label","disabled"])]),default:Object(l["P"])(()=>[Object(l["j"])("div",C,[Object(l["m"])(M,{value:e.getUploadProgress()},{default:Object(l["P"])(()=>[Object(l["j"])("div",N,Object(l["J"])(e.getUploadProgress())+"%",1)]),_:1},8,["value"])]),(Object(l["z"])(!0),Object(l["i"])(l["a"],null,Object(l["D"])(e.uploadFiles,a=>(Object(l["z"])(),Object(l["g"])(B,{key:a.key,keyValue:a.key,name:a.name,size:a.size,uploaded:a.uploaded,onCompelete:e.onCompeleteUpload,onClose:e.onCloseUploadProgress},null,8,["keyValue","name","size","uploaded","onCompelete","onClose"]))),128))]),_:1},8,["header","visible"])])}var I=t("d725"),D=t("6bd1"),M=t("20e5"),B=t("3ff8");function R(e,a=1){if(0===e)return"0 B";const t=1024,l=a<0?0:a,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(l))+" "+o[s]}function z(e){return e.replace(/^.*[\\/]/,"")}function _(e){return e.split(".").pop()}function E(e){setTimeout(()=>{const a=document.getElementById(e);a&&a.focus()},200)}const T=new Set(["aac","ai","aiff","avi","bmp","c","cpp","css","csv","dat","dmg","doc","dotx","dwg","dxf","eps","exe","flv","gif","h","hpp","html","ics","iso","java","jpg","js","key","less","mid","mp3","mp4","mpg","odf","ods","odt","otp","ott","pdf","php","png","ppt","psd","py","qt","rar","rb","rtf","sass","scss","sql","tga","tgz","tiff","txt","wav","xls","xlsx","xml","yml","zip"]);function L(e){const a="/AzureBlobFiler/img/icon/file/",t=".png";let l=_(e).toLowerCase();return T.has(l)||(l="blank"),a+l+t}function K(e){return null==e?"":e.getUTCFullYear()+"-"+H(e.getUTCMonth()+1)+"-"+H(e.getUTCDate())+"T"+H(e.getUTCHours())+":"+H(e.getUTCMinutes())+":"+H(e.getUTCSeconds())+"Z"}function A(e){if(null==e)return"";const a=-1*(new Date).getTimezoneOffset();if(0==a)return K(e);const t=a<0?"-":"+",l=Math.floor(Math.abs(a/60)),o=Math.abs(a%60);return e.getFullYear()+"-"+H(e.getMonth()+1)+"-"+H(e.getDate())+"T"+H(e.getHours())+":"+H(e.getMinutes())+":"+H(e.getSeconds())+t+H(l)+":"+H(o)}function H(e,a=2){return e.toString().padStart(a,"0")}function V(e,a){for(let t=0;t<a.length;++t)if(e.indexOf(a.charAt(t))<0)return!1;return!0}const J={class:"fluid",style:{"margin-bottom":"5px"}},q={style:{"margin-left":"5px","font-weight":"normal",color:"#fff","text-align":"left","text-shadow":"1px 1px 0 #495057"}};function Y(e,a,t,o,s,n){const r=Object(l["F"])("ProgressBar");return Object(l["z"])(),Object(l["i"])("div",J,[Object(l["m"])(r,{value:e.value},{default:Object(l["P"])(()=>[Object(l["j"])("div",q,Object(l["J"])(e.name)+" : "+Object(l["J"])(e.value)+"%",1)]),_:1},8,["value"])])}var Q=Object(l["n"])({name:"FileUploadProgress",props:{keyValue:String,name:String,size:{type:Number,default:0},uploaded:{type:Number,default:0}},emits:["compelete","close"],setup(e,a){const t=Object(l["B"])({closing:!1,value:0});return Object(l["O"])(()=>e.uploaded,l=>{t.value=Math.floor(l/e.size*100),t.value>=100&&!t.closing&&(t.closing=!0,a.emit("compelete",e.keyValue,e.size),setTimeout(()=>a.emit("close",e.keyValue),3e3))}),{...Object(l["L"])(t)}}});const W=p()(Q,[["render",Y]]);var G=W,Z=Object(l["n"])({name:"Home",components:{FileUploadProgress:G},setup(){const{t:e}=Object(o["b"])(),a=Object(I["b"])(),t=Object(l["C"])(),s=Object(l["C"])(),n=Object(l["C"])(),r={key:"",label:"",icon:"pi pi-fw pi-inbox",children:[],data:[],loaded:!1},i=[{key:"refresh",label:e("general.refresh"),icon:"pi pi-fw pi-refresh",command:async()=>{await x()}},{key:"createFolder",label:e("general.createFolder"),icon:"pi pi-fw pi-folder",command:async()=>{await C()}},{key:"upload",label:e("general.upload"),icon:"pi pi-fw pi-upload",items:[{key:"folderUpload",label:e("general.folderUpload"),icon:"pi pi-fw pi-folder-open",command:async()=>{await T()}},{key:"fileUpload",label:e("general.fileUpload"),icon:"pi pi-fw pi-copy",command:async()=>{await _()}}]},{key:"selectedItems",label:Object(l["e"])(()=>e("general.selectedItems",{count:g.selectedItems.length})),icon:"pi pi-fw pi-ellipsis-h",disabled:Object(l["e"])(()=>0==g.selectedItems.length),items:[{key:"fileDelete",label:e("general.fileDelete"),icon:"pi pi-fw pi-file-excel",command:async()=>{await J()}}]},{key:"folderDelete",label:e("general.folderDelete"),icon:"pi pi-fw pi-trash",command:async()=>{await H()}}];let c,d,p="{ENTER_THE_BLOB_SAS_URL_HERE}",u=".";const g=Object(l["B"])({loading:!1,expandedKeys:{},selectionKeys:{},breadcrumbHome:{label:"",command:()=>v("")},breadcrumbItems:[],nodes:[],node:r,flattenedNodes:{},blobItems:[],selectedItems:[],messages:"",menuItems:i,folderName:"",folderNameErrorMessage:"",sasUrl:"",sasUrlErrorMessage:"",isShowingCreateFolderDialog:!1,isShowingUploadProgressDialog:!1,isShowingInputSasUrlDialog:!1,isUploading:!1,uploadFiles:[],uploadSize:0,uploadedSize:0});g.flattenedNodes[r.key]=r;const m=async()=>{c=new D["a"](p),u=".",d=c.getContainerClient(u),await d.listBlobsByHierarchy("/",{prefix:"__DUMMY__"}).next(),await f(r,!1),g.nodes.push(r),g.breadcrumbHome.label=d.containerName,r.label=d.containerName,r.children&&r.children.length>0&&j(r.key)},f=async(e,a)=>{if(!e.children)return;const t=e.key;if(g.selectedItems=[],g.blobItems=[],a||!e.loaded){a&&(e.loaded=!1,e.children.splice(0),e.data.splice(0)),g.loading=!0;try{g.messages+="[INFO] GET /"+t+"\n";for await(const a of d.listBlobsByHierarchy("/",{prefix:t}))if("prefix"===a.kind){let t=a;if(e.children.find(e=>e.key==t.name))continue;const l={key:t.name,label:z(t.name.slice(0,-1)),icon:"pi pi-fw pi-folder",children:[],data:[],leaf:!1,parent:e};e.children.push(l),g.flattenedNodes[l.key]=l}else{let t=a;".keep"!=z(t.name)&&g.blobItems.push(t),e.data.push(t)}e.loaded=!0}catch(l){g.messages+="[ERROR] "+l.message+"\n"}g.loading=!1,h()}else{const a=e.data.length;for(let t=0;t<a;t++)".keep"!=z(e.data[t].name)&&g.blobItems.push(e.data[t])}},b=async()=>{try{g.messages+="[INFO] Preparing for delete...\n";const e=[];for(const a in g.flattenedNodes){const t=g.flattenedNodes[a];if(t.key.startsWith(g.node.key)){for(const a of t.data)g.messages+="[INFO] Deleting /"+a.name+"\n",e.push(d.deleteBlob(a.name));delete g.flattenedNodes[a]}}await Promise.all(e),g.messages+="[INFO] Done.\n"}catch(e){g.messages+="[ERROR] "+e.message+"\n"}h(),g.node.parent?(S(g.node.parent.key),await f(g.node.parent,!0),await v(g.node.parent.key)):(S(r.key),await f(r,!0),await v(r.key))},y=async()=>{try{g.messages+="[INFO] Preparing for delete...\n";const e=[];for(const a of g.selectedItems)g.messages+="[INFO] Deleting /"+a.name+"\n",e.push(d.deleteBlob(a.name));await Promise.all(e),g.messages+="[INFO] Done.\n"}catch(e){g.messages+="[ERROR] "+e.message+"\n"}h(),S(g.node.key),await f(g.node,!0),await v(g.node.key)},h=()=>{t.value&&(t.value.scrollTop=t.value.scrollHeight)},O=e=>g.flattenedNodes[e],j=e=>{g.expandedKeys[e]=!0},U=e=>{delete g.expandedKeys[e]},S=e=>{for(const a in g.expandedKeys)a.startsWith(e)&&U(a);U(e)},v=async e=>{const a=O(e);a&&await G(a);for(const t in g.selectionKeys)delete g.selectionKeys[t];g.selectionKeys[e]=!0},w=async e=>{const a=O(e);a&&(S(a.key),await f(a,!0),await v(a.key))},k=e=>{g.breadcrumbItems.splice(0);const a=e.key.slice(0,-1).split("/");let t="";const l=a.length;for(let o=0;o<l;o++)if(a[o]){t+=a[o]+"/";const e=t;g.breadcrumbItems.push({label:a[o],command:async()=>{await v(e)}})}},F=()=>0==g.uploadSize?0:Math.floor(g.uploadedSize/g.uploadSize*100),x=async()=>{await w(g.node.key)},C=async()=>{g.folderName="",g.folderNameErrorMessage="",g.isShowingCreateFolderDialog=!0,E("folderName")},N=async()=>{if(!g.sasUrl)return void(g.sasUrlErrorMessage=e("message.required",{target:e("general.sasUrl")}));const a=Object(M["a"])(g.sasUrl),t=B["a"].parse(a);if("c"==t.getQueryParameterValue("sr"))if(t.getQueryParameterValue("sp"))if(V(t.getQueryParameterValue("sp"),"racwdl")){p=g.sasUrl;try{await m()}catch(l){return console.log(l),void(g.sasUrlErrorMessage=e("message.invalidSasUrl"))}g.isShowingInputSasUrlDialog=!1}else g.sasUrlErrorMessage=e("message.unexpectedSignedPermissions");else g.sasUrlErrorMessage=e("message.unexpectedSignedPermissions");else g.sasUrlErrorMessage=e("message.unexpectedSignedResource")},P=async()=>{if(!g.folderName)return void(g.folderNameErrorMessage=e("message.required",{target:e("general.folderName")}));if(g.folderName.includes("/"))return void(g.folderNameErrorMessage=e("message.illegalCharacter",{target:e("general.folderName"),illegal:"/"}));const a=g.node.key+g.folderName+"/";try{g.messages+="[INFO] Creating /"+g.folderName+"\n";const e=d.getBlockBlobClient(a+".keep");await e.uploadData(new ArrayBuffer(0)),g.messages+="[INFO] Done.\n"}catch(t){g.messages+="[ERROR] "+t.message+"\n"}if(h(),g.node.children&&!g.node.children.find(e=>e.key==a)){const e={key:a,label:z(a.slice(0,-1)),icon:"pi pi-fw pi-folder",children:[],data:[],leaf:!1,parent:g.node};g.node.children.push(e),g.flattenedNodes[e.key]=e,j(g.node.key)}await v(a),g.isShowingCreateFolderDialog=!1},_=async()=>{s.value&&s.value.click()},T=async()=>{n.value&&n.value.click()},H=async()=>{a.require({message:e("message.folderDeleteConfirmationMessage"),header:e("general.folderDelete"),icon:"pi pi-exclamation-triangle",acceptLabel:e("general.yes"),rejectLabel:e("general.no"),accept:async()=>{await b()}})},J=async()=>{a.require({message:e("message.fileDeleteConfirmationMessage"),header:e("general.fileDelete"),icon:"pi pi-exclamation-triangle",acceptLabel:e("general.yes"),rejectLabel:e("general.no"),accept:async()=>{await y()}})},q=async()=>{if(s.value&&s.value.files){g.isShowingUploadProgressDialog=!0,g.uploadFiles=[],g.uploadSize=0,g.uploadedSize=0,g.isUploading=!0;try{g.messages+="[INFO] Preparing for upload...\n";const e=[];for(const a of s.value.files){g.messages+="[INFO] Uploading /"+g.node.key+a.name+"\n";const t=d.getBlockBlobClient(g.node.key+a.name),o=Object(l["B"])({key:g.node.key+a.name,name:a.name,size:a.size,uploaded:0});g.uploadSize+=a.size,g.uploadFiles.push(o),e.push(t.uploadData(a,{onProgress:e=>{o.uploaded=e.loadedBytes}}))}await Promise.all(e),g.messages+="[INFO] Done.\n"}catch(e){g.messages+="[ERROR] "+e.message+"\n"}h(),await f(g.node,!0),g.isUploading=!1,s.value.value=""}},Y=async()=>{if(n.value&&n.value.files){g.isShowingUploadProgressDialog=!0,g.uploadFiles=[],g.uploadSize=0,g.uploadedSize=0,g.isUploading=!0;try{g.messages+="[INFO] Preparing for upload...\n";const e=[];for(const a of n.value.files){const t=a;g.messages+="[INFO] Uploading /"+g.node.key+t.webkitRelativePath+"\n";const o=d.getBlockBlobClient(g.node.key+t.webkitRelativePath),s=Object(l["B"])({key:g.node.key+t.webkitRelativePath,name:a.name,size:a.size,uploaded:0});g.uploadSize+=a.size,g.uploadFiles.push(s),e.push(o.uploadData(a,{onProgress:e=>{s.uploaded=e.loadedBytes}}))}await Promise.all(e),g.messages+="[INFO] Done.\n"}catch(e){g.messages+="[ERROR] "+e.message+"\n"}h(),await w(g.node.key),g.isUploading=!1,n.value.value=""}},Q=(e,a)=>{g.uploadedSize+=a},W=e=>{if(!g.uploadFiles)return;let a=-1;for(let t=0;t<g.uploadFiles.length;t++)if(g.uploadFiles[t].key===e){a=t;break}a>=0&&g.uploadFiles.splice(a,1)},G=async e=>{await f(e,!1),g.node=e,k(e),e.children&&e.children.length>0?j(e.key):e.leaf=!0};return Object(l["x"])(async()=>{if(p.startsWith("{")&&p.endsWith("}"))g.isShowingInputSasUrlDialog=!0;else try{await m()}catch(e){console.log(e),g.isShowingInputSasUrlDialog=!0}}),{...Object(l["L"])(g),messageRef:t,fileUploadInputRef:s,folderUploadInputRef:n,convertToISO8601:K,convertToISO8601Local:A,formatBytes:R,getFileName:z,getFileIcon:L,getUploadProgress:F,listBlobs:f,onChangeFileUploadInput:q,onChangeFolderUploadInput:Y,onClickDialogCreateFolder:P,onClickDialogSubmitSasUrl:N,onCloseUploadProgress:W,onCompeleteUpload:Q,onNodeSelect:G,t:e}}});const X=p()(Z,[["render",P]]);var $=X;const ee=[{path:"/",name:"Home",component:$}],ae=Object(m["a"])({history:Object(m["b"])("/AzureBlobFiler/"),routes:ee});var te=ae,le=t("9319"),oe=t("bb57"),se=t("c98b"),ne=t("6f85"),re=t("b24b"),ie=t("9383"),ce=t("5b2c"),de=t("5bd2"),pe=t("8398"),ue=t("c0c3"),ge=t("c045"),me=t("237b"),fe=t("1e02"),be=t("e73a"),ye=t("5eec");t("098b"),t("e1ae"),t("4121"),t("22a3"),t("b383");const he=Object(l["f"])(g);he.use(r),he.use(te),he.use(le["a"]),he.use(re["a"]),he.component("Button",oe["a"]),he.component("Breadcrumb",se["a"]),he.component("Column",ne["a"]),he.component("ConfirmDialog",ie["a"]),he.component("DataTable",ce["a"]),he.component("Dialog",de["a"]),he.component("InputText",pe["a"]),he.component("Menubar",ue["a"]),he.component("ProgressBar",ge["a"]),he.component("Splitter",me["a"]),he.component("SplitterPanel",fe["a"]),he.component("Tree",be["a"]),he.component("TreeTable",ye["a"]),he.mount("#app")}});
//# sourceMappingURL=app.js.map